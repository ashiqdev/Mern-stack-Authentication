{"id":"helpers/auth.js","dependencies":[{"name":"/home/ashik/react-revisited/mern-auth/packages/client/.babelrc","includedInParent":true,"mtime":1599286422041},{"name":"/home/ashik/react-revisited/mern-auth/packages/client/package.json","includedInParent":true,"mtime":1599663192171},{"name":"@babel/runtime/helpers/interopRequireWildcard","parent":"/home/ashik/react-revisited/mern-auth/packages/client/src/helpers/auth.js","resolved":"/home/ashik/react-revisited/mern-auth/node_modules/@babel/runtime/helpers/interopRequireWildcard.js"},{"name":"js-cookie","parent":"/home/ashik/react-revisited/mern-auth/packages/client/src/helpers/auth.js","resolved":"/home/ashik/react-revisited/mern-auth/node_modules/js-cookie/src/js.cookie.js"}],"generated":{"js":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.updateUser = exports.isAuth = exports.signout = exports.authenticate = exports.removeLocalStorage = exports.setLocalStorage = exports.getCookie = exports.removeCookie = exports.setCookie = void 0;\n\nvar cookie = _interopRequireWildcard(require(\"js-cookie\"));\n\n// set Cookie\nvar setCookie = function setCookie(key, value) {\n  if (window !== 'undefined') {\n    cookie.set(key, value, {\n      // 1 Day\n      expires: 1\n    });\n  }\n}; // Remove cookie\n\n\nexports.setCookie = setCookie;\n\nvar removeCookie = function removeCookie(key) {\n  if (window !== 'undefined') {\n    cookie.remove(key, {\n      expires: 1\n    });\n  }\n}; // get cookie\n\n\nexports.removeCookie = removeCookie;\n\nvar getCookie = function getCookie(key) {\n  if (window !== 'undefined') {\n    return cookie.get(key);\n  }\n}; // set cookie in localstorage\n\n\nexports.getCookie = getCookie;\n\nvar setLocalStorage = function setLocalStorage(key, value) {\n  if (window !== 'undefined') {\n    localStorage.setItem(key, JSON.stringify(value));\n  }\n}; // Remove cookie from localstorage\n\n\nexports.setLocalStorage = setLocalStorage;\n\nvar removeLocalStorage = function removeLocalStorage(key) {\n  if (window !== 'undefined') {\n    localStorage.removeItem(key);\n  }\n}; // Authenticate user\n\n\nexports.removeLocalStorage = removeLocalStorage;\n\nvar authenticate = function authenticate(response, next) {\n  var _response$data = response.data,\n      token = _response$data.token,\n      user = _response$data.user;\n  setCookie('token', token);\n  setLocalStorage('user', user);\n  next();\n}; // Logout user\n\n\nexports.authenticate = authenticate;\n\nvar signout = function signout(next) {\n  removeCookie('token');\n  removeLocalStorage('user');\n  next();\n}; // Get user info from localstorage\n\n\nexports.signout = signout;\n\nvar isAuth = function isAuth() {\n  if (window !== 'undefined') {\n    var cookieChecked = getCookie('token');\n    var UserExists = localStorage.getItem('user');\n\n    if (cookieChecked) {\n      if (UserExists) {\n        return JSON.parse(UserExists);\n      }\n\n      return false;\n    }\n  }\n}; // update user data\n// TODO need refactoring\n\n\nexports.isAuth = isAuth;\n\nvar updateUser = function updateUser(response, next) {\n  console.log('UPDATE USER IN LOCALSTORAGE HELPERS', response);\n\n  if (typeof window !== 'undefined') {\n    var auth = JSON.parse(localStorage.getItem('user'));\n    auth = response.data;\n    localStorage.setItem('user', JSON.stringify(auth));\n  }\n\n  next();\n};\n\nexports.updateUser = updateUser;"},"sourceMaps":null,"error":null,"hash":"af70770946433629a43fb39c6934da5d","cacheData":{"env":{}}}